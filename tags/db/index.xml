<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>kingjcy Blog</title>
    <link>http://kingjcy.github.io/tags/db/index.xml</link>
    <description>Recent content on kingjcy Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Copyright (c) 2016. All rights reserved.</copyright>
    <atom:link href="http://kingjcy.github.io/tags/db/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>RDBMS-oracle,mysql</title>
      <link>http://kingjcy.github.io/blog/2016/03/08/rdbms-oraclemysql/</link>
      <pubDate>Tue, 08 Mar 2016 09:20:19 +0800</pubDate>
      
      <guid>http://kingjcy.github.io/blog/2016/03/08/rdbms-oraclemysql/</guid>
      <description>

&lt;p&gt;关系数据库管理系统&lt;/p&gt;

&lt;h2 id=&#34;mysql&#34;&gt;mysql&lt;/h2&gt;

&lt;h3 id=&#34;安装&#34;&gt;安装&lt;/h3&gt;

&lt;p&gt;先去mysql官网，点击downloads，然后找到最后一个开源的版本，遵守GPL协议的MySQL Community Edition (GPL)，点击进去在左侧导航栏中找到MySQL Community Server点击进去，现在redhat的版本，下在一个500多M的rpm的tar包，当然这个可以网页下载，也可以用wget等linux工具下载&lt;/p&gt;

&lt;p&gt;下载后解压安装这个tar包&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;tar -xvf mysql-5.7.13-1.el7.x86_64.rpm-bundle.tar
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;原来系统中就携带了mysql的社区版本，需要先卸载，不然影响后面的安装&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rpm -qa|grep mariadb
rpm -e mariadb-devel-5.5.44-2.el7.centos.x86_64
rpm -e mariadb-libs-5.5.44-2.el7.centos.x86_64 --nodeps
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;然后按顺序安装对应的rpm包，要按先后顺序，前后有依赖关系&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;rpm -ivh mysql-community-common-5.7.13-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-5.7.13-1.el7.x86_64.rpm
rpm -ivh mysql-community-client-5.7.13-1.el7.x86_64.rpm
rpm -ivh mysql-community-server-5.7.13-1.el7.x86_64.rpm
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这样就安装好了，然后需要初始化数据库&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;mysql_install_db --datadir=/var/lib/mysql   //必须指定datadir,执行后会生成~/.mysql_secret密码文件
mysqld --initialize                         //新版的推荐此方法，执行生会在/var/log/mysqld.log生成随机密码
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;这两条语句执行一个就可以完成初始化，针对的版本不一样,上面的密码文件中都是后面root登录的密码，后面登录后可以用set password=password(&amp;lsquo;123456&amp;rsquo;);来重新设置密码&lt;/p&gt;

&lt;p&gt;更改mysql数据库目录的所属用户及其所属组，然后启动mysql数据库&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;chown mysql:mysql /var/lib/mysql -R
systemctl start mysqld.service            //启动mysql数据库服务
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;然后就可以登录了。&lt;/p&gt;

&lt;p&gt;第一：更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称&amp;rsquo;%&amp;lsquo;。
或者新加条记录，“host” 项为要访问的ip地址，并授权。重启mysql服务。
第二：在系统防火墙添加例外端口：3306，并允许例外。&lt;/p&gt;

&lt;p&gt;。
或者新加条记录，“host” 项为要访问的ip地址，并授权。重启mysql服务。
第二：在系统防火墙添加例外端口：3306，并允许例外。&lt;/p&gt;

&lt;p&gt;还可以重新服务权限】&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;grant all privileges on *.* to &#39;user&#39;@&#39;%&#39; idebtified by &#39;passwd&#39;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;今天登陆mysql show databases出现Ignoring query to other database错误，又试了几个命令和sql全部提示Ignoring query to other database错误
是在连接mysql时没有&amp;rdquo;-u&amp;rdquo;参数导致的&amp;rdquo;&amp;rdquo;&lt;/p&gt;

&lt;p&gt;Lost connection to MySQL server at ‘reading initial communication packet&amp;rsquo;
注释掉本机掉绑定&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;bind-address = 127.0.0.1
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;在mysqld中新增参数&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;skip-name-resolve
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ERROR 2002 (HY000): Can&amp;rsquo;t connect to local MySQL server through socket &amp;lsquo;/var/lib/mysql/mysql.sock&amp;rsquo;
1. lsof -i:3306&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;修改配置文件my.cnf，指定sock&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
  </channel>
</rss>